# Local filesystem mounting

# Parameter: Where to mount the filesystem
mountroot ()
{
	run_scripts /scripts/local-top

	# Get the root filesystem type
	if [ ! -e ${ROOT} ]; then
		panic "ALERT!  ${ROOT} does not exist.  Dropping to a shell!"
	fi

	eval $(fstype < ${ROOT})

	run_scripts /scripts/local-premount

	if [ ${readonly} = y ]; then
		roflag=-r
	else
		roflag=-w
	fi

	modprobe ${FSTYPE}

	# Mount root
	mount ${roflag} -t ${FSTYPE} ${ROOT} ${rootmnt}

	run_scripts /scripts/local-bottom
}
